<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/FAV_ICON.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RecklessBear | Premium Custom Sportswear</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Bebas+Neue&family=Montserrat:wght@400;500;700;900&display=swap" rel="stylesheet">
    <meta name="description" content="RecklessBear designs and manufactures elite custom sportswear for schools, teams, and athletes in South Africa. From concept to creation — Do it Reckless." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://recklessbear.co.za/">
    <meta property="og:title" content="RecklessBear | Premium Custom Sportswear">
    <meta property="og:description" content="RecklessBear designs and manufactures elite custom sportswear for schools, teams, and athletes in South Africa. From concept to creation — Do it Reckless.">
    <meta property="og:image" content="https://res.cloudinary.com/dnlgohkcc/image/upload/v1768799688/reckless_logo_r910n4.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://recklessbear.co.za/">
    <meta name="twitter:title" content="RecklessBear | Premium Custom Sportswear">
    <meta name="twitter:description" content="RecklessBear designs and manufactures elite custom sportswear for schools, teams, and athletes in South Africa. From concept to creation — Do it Reckless.">
    <meta name="twitter:image" content="https://res.cloudinary.com/dnlgohkcc/image/upload/v1768799688/reckless_logo_r910n4.png">
    
    <!-- The chatbot styles have been restored -->
    <style>
      /* Mobile-specific styles for the chatbot widget */
      @media (max-width: 768px) {
        #vg-widget-container {
          transform: scale(0.85);
          transform-origin: bottom right;
          margin: 0 !important;
          right: -15px !important;
          bottom: -15px !important;
        }
        .vg-bubble-button {
          padding: 12px !important;
        }
        .vg-bubble-button svg {
          width: 24px !important;
          height: 24px !important;
        }
        .vg-widget {
          max-width: 320px !important;
        }
        .vg-messages-container {
          font-size: 14px !important;
        }
        .vg-input-container {
          padding: 8px !important;
        }
      }
      /* Fix inverted/mirrored chatbot: flip horizontally; keep anchor at bottom-right */
      #VG_OVERLAY_CONTAINER {
        position: fixed !important;
        bottom: 0 !important;
        right: 0 !important;
        z-index: 9999 !important;
        transform: scaleX(-1);
        transform-origin: right bottom;
        width: auto !important;
        height: auto !important;
        pointer-events: none; /* Allow clicks to pass through container to button */
      }
      
      /* Re-enable pointer events on interactive elements */
      #VG_OVERLAY_CONTAINER * {
        pointer-events: auto;
      }
    </style>
    <!-- Set VG_CONFIG early, before any scripts load -->
    <script>
        window.VG_CONFIG = {
            ID: "6BhLW2avFF69X0ydpkZ3",
            region: 'na',
            render: 'bottom-right',
            modalMode: false,
            stylesheets: [
                "https://vg-bunny-cdn.b-cdn.net/vg_live_build/styles.css",
                "/convocore-overrides.css"
            ],
        };
        console.log('[CHATBOT DEBUG] VG_CONFIG set in head:', window.VG_CONFIG);
    </script>
  </head>
  <body class="bg-black">
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>

    <!-- Convocore chatbot: agent 6BhLW2avFF69X0ydpkZ3; scaleX(-1) fixes inverted/mirrored display -->
    <div id="VG_OVERLAY_CONTAINER"></div>
    <script>
        (function() {
            console.log('[CHATBOT DEBUG] Script initialization started');
            
            function initChatbot() {
                console.log('[CHATBOT DEBUG] Initializing chatbot...');
                
                // Check if container exists
                var container = document.getElementById('VG_OVERLAY_CONTAINER');
                if (!container) {
                    console.error('[CHATBOT DEBUG] ERROR: VG_OVERLAY_CONTAINER not found!');
                    return;
                }
                console.log('[CHATBOT DEBUG] Container found:', container);
                
                // Check if body exists
                if (!document.body) {
                    console.error('[CHATBOT DEBUG] ERROR: document.body not ready!');
                    return;
                }
                console.log('[CHATBOT DEBUG] document.body ready');
                
                // Config should already be set in head, but verify
                if (!window.VG_CONFIG) {
                    console.error('[CHATBOT DEBUG] ERROR: VG_CONFIG not found! Setting it now...');
                    window.VG_CONFIG = {
                        ID: "6BhLW2avFF69X0ydpkZ3",
                        region: 'na',
                        render: 'bottom-right',
                        modalMode: false,
                        stylesheets: [
                            "https://vg-bunny-cdn.b-cdn.net/vg_live_build/styles.css",
                            "/convocore-overrides.css"
                        ],
                    };
                }
                console.log('[CHATBOT DEBUG] VG_CONFIG verified:', window.VG_CONFIG);
                
                // Create and load script
                var VG_SCRIPT = document.createElement("script");
                VG_SCRIPT.src = "https://vg-bunny-cdn.b-cdn.net/vg_live_build/vg_bundle.js";
                VG_SCRIPT.defer = false; // Changed from true to false to ensure it loads
                
                // Add error handler
                VG_SCRIPT.onerror = function(e) {
                    console.error('[CHATBOT DEBUG] ERROR: Failed to load vg_bundle.js');
                    console.error('[CHATBOT DEBUG] Script src:', VG_SCRIPT.src);
                    console.error('[CHATBOT DEBUG] Error event:', e);
                    console.error('[CHATBOT DEBUG] Check Network tab for 404, CORS, or blocked requests');
                };
                
                // Add load handler
                VG_SCRIPT.onload = function() {
                    console.log('[CHATBOT DEBUG] ✅ Script loaded successfully');
                    console.log('[CHATBOT DEBUG] Checking for Convocore objects...');
                    console.log('[CHATBOT DEBUG] window.VG:', typeof window.VG !== 'undefined' ? window.VG : 'NOT FOUND');
                    console.log('[CHATBOT DEBUG] window.VGWidget:', typeof window.VGWidget !== 'undefined' ? window.VGWidget : 'NOT FOUND');
                    
                    // Check multiple times with increasing delays
                    var checkTimes = [1000, 2000, 3000, 5000, 10000];
                    checkTimes.forEach(function(delay) {
                        setTimeout(function() {
                            var widgetContainer = document.getElementById('vg-widget-container');
                            var bubbleButton = document.querySelector('.vg-bubble-button');
                            var overlayContainer = document.getElementById('VG_OVERLAY_CONTAINER');
                            
                            console.log('[CHATBOT DEBUG] Check after ' + delay + 'ms:');
                            console.log('[CHATBOT DEBUG]   - Widget container:', widgetContainer ? '✅ FOUND' : '❌ NOT FOUND');
                            console.log('[CHATBOT DEBUG]   - Bubble button:', bubbleButton ? '✅ FOUND' : '❌ NOT FOUND');
                            console.log('[CHATBOT DEBUG]   - Overlay container children:', overlayContainer ? overlayContainer.children.length : 'N/A');
                            
                            if (overlayContainer && overlayContainer.children.length > 0) {
                                var firstChild = overlayContainer.children[0];
                                console.log('[CHATBOT DEBUG]   - First child element:', firstChild.tagName, firstChild.id || firstChild.className);
                                
                                // Search for common Convocore elements
                                var allElements = overlayContainer.querySelectorAll('*');
                                console.log('[CHATBOT DEBUG]   - Total elements inside overlay:', allElements.length);
                                
                                // Check for various possible selectors
                                var possibleSelectors = [
                                    '#vg-widget-container',
                                    '.vg-widget-container',
                                    '[data-vg-widget]',
                                    '.vg-bubble-button',
                                    'button',
                                    '[role="button"]'
                                ];
                                
                                possibleSelectors.forEach(function(selector) {
                                    var found = overlayContainer.querySelector(selector);
                                    if (found) {
                                        console.log('[CHATBOT DEBUG]   - FOUND element with selector "' + selector + '":', found);
                                        var styles = window.getComputedStyle(found);
                                        console.log('[CHATBOT DEBUG]     - Display:', styles.display);
                                        console.log('[CHATBOT DEBUG]     - Visibility:', styles.visibility);
                                        console.log('[CHATBOT DEBUG]     - Opacity:', styles.opacity);
                                        console.log('[CHATBOT DEBUG]     - Transform:', styles.transform);
                                        console.log('[CHATBOT DEBUG]     - Position:', styles.position);
                                        console.log('[CHATBOT DEBUG]     - Z-index:', styles.zIndex);
                                        console.log('[CHATBOT DEBUG]     - Width:', styles.width);
                                        console.log('[CHATBOT DEBUG]     - Height:', styles.height);
                                    }
                                });
                                
                                // Check overlay container styles
                                var overlayStyles = window.getComputedStyle(overlayContainer);
                                console.log('[CHATBOT DEBUG]   - Overlay container styles:');
                                console.log('[CHATBOT DEBUG]     - Transform:', overlayStyles.transform);
                                console.log('[CHATBOT DEBUG]     - Display:', overlayStyles.display);
                                console.log('[CHATBOT DEBUG]     - Visibility:', overlayStyles.visibility);
                                console.log('[CHATBOT DEBUG]     - Opacity:', overlayStyles.opacity);
                                console.log('[CHATBOT DEBUG]     - Position:', overlayStyles.position);
                                console.log('[CHATBOT DEBUG]     - Width:', overlayStyles.width);
                                console.log('[CHATBOT DEBUG]     - Height:', overlayStyles.height);
                            }
                            
                            if (widgetContainer) {
                                var styles = window.getComputedStyle(widgetContainer);
                                console.log('[CHATBOT DEBUG]   - Widget display:', styles.display);
                                console.log('[CHATBOT DEBUG]   - Widget visibility:', styles.visibility);
                                console.log('[CHATBOT DEBUG]   - Widget opacity:', styles.opacity);
                                console.log('[CHATBOT DEBUG]   - Widget position:', styles.position);
                                console.log('[CHATBOT DEBUG]   - Widget z-index:', styles.zIndex);
                            }
                        }, delay);
                    });
                };
                
                // Append to body
                try {
                    document.body.appendChild(VG_SCRIPT);
                    console.log('[CHATBOT DEBUG] ✅ Script tag appended to body');
                    console.log('[CHATBOT DEBUG] Script element:', VG_SCRIPT);
                } catch (e) {
                    console.error('[CHATBOT DEBUG] ERROR: Failed to append script:', e);
                }
            }
            
            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initChatbot);
                console.log('[CHATBOT DEBUG] Waiting for DOMContentLoaded...');
            } else {
                // DOM already ready, run immediately
                initChatbot();
            }
        })();
    </script>
  </body>
</html>
